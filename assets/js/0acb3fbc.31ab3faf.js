"use strict";(self.webpackChunkhalo_2_backend_docs=self.webpackChunkhalo_2_backend_docs||[]).push([[6],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},p="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=s(n),d=a,f=p["".concat(c,".").concat(d)]||p[d]||h[d]||o;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[p]="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9057:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var r=n(7462),a=(n(7294),n(3905));const o={sidebar_position:6},i="Translating Noir to Halo2",l={unversionedId:"contraints",id:"contraints",title:"Translating Noir to Halo2",description:"The prevailing functionality of any ACVM backend is translating the ACIR provided by Noir into the corresponding circuit. In the case of the Halo2 backend, this is handled by circuittranslator.rs. The NoirHalo2Translator is a Halo2 circuit object that uses the ACIR to programmatically synthesize constraints.",source:"@site/docs/6_contraints.md",sourceDirName:".",slug:"/contraints",permalink:"/halo2_backend_docs/contraints",draft:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"defaultSidebar",previous:{title:"Trusted Setup (CRS)",permalink:"/halo2_backend_docs/crs"},next:{title:"Proving and Verifying (Proof System)",permalink:"/halo2_backend_docs/proof_system"}},c={},s=[{value:"OpCode Flags",id:"opcode-flags",level:2},{value:"Arithmetic Functions",id:"arithmetic-functions",level:2},{value:"Black Box Functions",id:"black-box-functions",level:2},{value:"Equality Constraints",id:"equality-constraints",level:2},{value:"Public IO",id:"public-io",level:2}],u={toc:s},p="wrapper";function h(e){let{components:t,...n}=e;return(0,a.kt)(p,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"translating-noir-to-halo2"},"Translating Noir to Halo2"),(0,a.kt)("p",null,"The prevailing functionality of any ACVM backend is translating the ACIR provided by Noir into the corresponding circuit. In the case of the Halo2 backend, this is handled by ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/Ethan-000/halo2_backend/blob/master/crates/noir_halo2_backend_pse/src/circuit_translator.rs"},(0,a.kt)("inlineCode",{parentName:"a"},"circuit_translator.rs")),". The ",(0,a.kt)("inlineCode",{parentName:"p"},"NoirHalo2Translator")," is a Halo2 circuit object that uses the ACIR to programmatically synthesize constraints."),(0,a.kt)("p",null,"Currently, the Halo2 backend relies extensively on the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/privacy-scaling-explorations/halo2wrong/tree/master/maingate"},(0,a.kt)("inlineCode",{parentName:"a"},"halo2wrong Main Gate")),". The Main Gate provides an intuitive circuit that emulates the standard plonk equation. Additionally, it has an ergonomic API to use different logic expressions."),(0,a.kt)("h2",{id:"opcode-flags"},"OpCode Flags"),(0,a.kt)("p",null,'In the future, other black box functions like Sha256 will require other "chips" that use more columns than the Main Gate chip. To programmatically allocate columns according to the needs of the circuit, the Halo2 backend passes "Opcode Flags" which are used by the standard ',(0,a.kt)("a",{parentName:"p",href:"https://github.com/Ethan-000/halo2_backend/blob/master/crates/noir_halo2_backend_pse/src/circuit_translator.rs#L43"},(0,a.kt)("inlineCode",{parentName:"a"},"configure_with_params"))," API given to Halo2 Circuits in the PSE fork."),(0,a.kt)("p",null,"When OpCodes for functions like Sha256 are present, the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/Ethan-000/halo2_backend/blob/master/crates/noir_halo2_backend_pse/src/halo2_plonk_api.rs#L105-L121"},"configure API")," would have varying logic that conditionally allocates chips as needed. Note that since black box functions are largely absent currently, this functionality is simply a foundation for future work."),(0,a.kt)("h2",{id:"arithmetic-functions"},"Arithmetic Functions"),(0,a.kt)("p",null,"Recall the ",(0,a.kt)("a",{parentName:"p",href:"/halo2_backend_docs/acir"},"ACIR")," walkthrough - for our width 3 PlonK arithmetization, we know that we will either have 3 linear terms, or 1 linear term and 1 multiplicative term. We use the "),(0,a.kt)("h2",{id:"black-box-functions"},"Black Box Functions"),(0,a.kt)("h2",{id:"equality-constraints"},"Equality Constraints"),(0,a.kt)("h2",{id:"public-io"},"Public IO"))}h.isMDXComponent=!0}}]);