"use strict";(self.webpackChunkhalo_2_backend_docs=self.webpackChunkhalo_2_backend_docs||[]).push([[347],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},g=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),g=a,h=p["".concat(s,".").concat(g)]||p[g]||d[g]||o;return n?r.createElement(h,i(i({ref:t},u),{},{components:n})):r.createElement(h,i({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=g;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}g.displayName="MDXCreateElement"},8230:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));const o={sidebar_position:2},i="Getting Started",l={unversionedId:"getting_started",id:"getting_started",title:"Getting Started",description:"As of now, the Halo2 Backend is not shipped to the production Nargo CLI. To use it, you'll need to manually build the command line.",source:"@site/docs/getting_started.md",sourceDirName:".",slug:"/getting_started",permalink:"/halo2_backend_docs/getting_started",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"defaultSidebar",previous:{title:"Introduction",permalink:"/halo2_backend_docs/"},next:{title:"ACIR OpCodes",permalink:"/halo2_backend_docs/acir"}},s={},c=[{value:"Building Nargo",id:"building-nargo",level:2},{value:"Manually",id:"manually",level:3},{value:"Nix",id:"nix",level:3},{value:"Operating Halo2 using Nargo/ Noir",id:"operating-halo2-using-nargo-noir",level:2},{value:"Proving and Verifying",id:"proving-and-verifying",level:2},{value:"Verifying on the EVM.",id:"verifying-on-the-evm",level:2}],u={toc:c},p="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(p,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"getting-started"},"Getting Started"),(0,a.kt)("p",null,"As of now, the Halo2 Backend is not shipped to the production Nargo CLI. To use it, you'll need to manually build the command line."),(0,a.kt)("h2",{id:"building-nargo"},"Building Nargo"),(0,a.kt)("h3",{id:"manually"},"Manually"),(0,a.kt)("p",null,"In order to work with this repository, you'll need ",(0,a.kt)("a",{parentName:"p",href:"https://www.rust-lang.org/tools/install"},"rust installed on your local machine"),". A nightly version of rust is required (",(0,a.kt)("inlineCode",{parentName:"p"},"nightly-2022-10-28"),"), but this is handled by the repository's ",(0,a.kt)("inlineCode",{parentName:"p"},"toolchain")," file."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Download the halo2 backend repository")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/ethan-000/halo2_backend\ncd halo2_backend\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Download a custom fork of Noir and the Nargo CLI")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/Ethan-000/noir --branch demo-0.1.2\ncd noir\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Install Nargo with the PSE version of Halo2 as the proving system backend")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cargo install --path crates/nargo_cli --locked --features pse_halo2_backend --no-default-features\n")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Ensure that the custom build of nargo has been installed:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"which nargo\n# should return /home/USER/.cargo/bin/nargo or something similar\n")),(0,a.kt)("p",null,"Note that when switching back to the ",(0,a.kt)("inlineCode",{parentName:"p"},"noirup")," installation, you will likely have to remove this file!"),(0,a.kt)("h3",{id:"nix"},"Nix"),(0,a.kt)("p",null,"TODO"),(0,a.kt)("h2",{id:"operating-halo2-using-nargo-noir"},"Operating Halo2 using Nargo/ Noir"),(0,a.kt)("p",null,"You can now use ",(0,a.kt)("inlineCode",{parentName:"p"},"nargo")," from the command line as you would with the production Barretenberg library. This section is a brief overview of using commands to drive Halo2 with Noir. The mechanics of this functionality is covered in more depth in future sections."),(0,a.kt)("h2",{id:"proving-and-verifying"},"Proving and Verifying"),(0,a.kt)("p",null,"You can see examples of .nr files in ",(0,a.kt)("inlineCode",{parentName:"p"},"crates/noir_halo2_backend_common/test_programs"),". You can also write your own circuits, but beware of using unimplemented black box functions."),(0,a.kt)("p",null,"In this case, we will use the example ",(0,a.kt)("inlineCode",{parentName:"p"},"1_mul")," which already includes ",(0,a.kt)("inlineCode",{parentName:"p"},"Prover.toml")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"Verifier.toml"),"."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"In the halo2_backend root directory, go to one of the test programs (or navigate to your custom program)")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd crates/noir_halo2_backend_common/test_programs/1_mul\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Prove the circuit in halo2 KZG:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"nargo prove\n")),(0,a.kt)("p",null,"This outputs a halo2 KZG proof of the circuit with your given inputs."),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Verify the circuit in halo2 KZG")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"nargo verify\n")),(0,a.kt)("p",null,"Unlike the ",(0,a.kt)("inlineCode",{parentName:"p"},"bb.js")," (",(0,a.kt)("inlineCode",{parentName:"p"},"halo2.js")," coming soon!) repository, nargo will re-execute the proof and then verify it. "),(0,a.kt)("h2",{id:"verifying-on-the-evm"},"Verifying on the EVM."),(0,a.kt)("p",null,"Though nargo is using halo2, it can be difficult to tell. One way to easily prove to yourself that you are using the halo2 backend is to generate the EVM verifier contract. While Barreteberg generates a solidity verifier, you'll see a Yul verifier for Halo2."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"nargo codegen-verifier\n# old: cat contract/plonk_vk.sol\ncat contract/verifier.yul\n")),(0,a.kt)("p",null,"See the EVM Verification page for more details on implementing your unit tests."))}d.isMDXComponent=!0}}]);